<aside class="sidebar flex-none flex-grow-0 relative pt-14 pb-8 lg:w-80 lg:pt-0 lg:ml-16">

    {{#is "post"}}
        {{#post}}
            {{#has tag="in-english"}}
                {{#get "posts" filter="tag:in-english+id:-{{id}}" limit="4" as |related_en_posts|}}
                    {{#if related_en_posts}}
                        {{> "sidebar/sidebar-story" widgetTitle="Related Articles (English)" widgetPosts=related_en_posts}}
                    {{/if}}
                {{/get}}
            {{/has}}
            {{!-- show the last 5 articles on the post page --}}
            {{#get "posts" limit="4" filter="id:-{{id}}" as |sidebar_latest_post| }}
                {{> "sidebar/sidebar-story" widgetTitle=(t "Latest Posts") widgetPosts=sidebar_latest_post}}
            {{/get}}
        {{/post}}
    {{else}}
        {{!-- show the featured 5 articles on the home page --}}
        {{#get "posts" filter="featured:true" limit="4" as |sidebar_featured_post|}}
            {{#if sidebar_featured_post}}
                {{> "sidebar/sidebar-story" widgetTitle=(t "Featured Posts") widgetPosts=sidebar_featured_post}}
            {{/if}}
        {{/get}}
    {{/is}}

    {{!-- Widget Sybscribe - partials/sidebar/sidebar-subscribers.hbs --}}
    {{#if @custom.disable_member_subscriptions}}{{#unless @member}}{{> "sidebar/sidebar-subscribers"}}{{/unless}}{{/if}}

    {{!-- Tag Cloud - partials/sidebar/sidebar-tag-cloud.hbs --}}
    <div class="sticky top-24">{{> "sidebar/sidebar-tag-cloud"}}</div>

    <div class="sidebar-widget mb-8 text-center shadow-lg p-6 bg-primary rounded-2xl" id="most-read">
      <h3 class="text-lg font-semibold mb-4">Artículos más leídos</h3>
      <ul id="most-read-list" class="list-none p-0 m-0"></ul>
    </div>
    <script>
      fetch('/content/data/most-read.json')
        .then(res => res.json())
        .then(articles => {
          const container = document.getElementById('most-read-list');
          articles.forEach(article => {
            container.innerHTML += `
              <li class='mb-2'>
                <a href="${article.url}" class="text-white hover:underline">${article.label}</a>
              </li>
            `;
          });
        });
    </script>
</aside>